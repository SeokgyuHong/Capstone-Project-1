센서등록
insert into sensor (wifi_mac_address, board_nickname, phone_number, address, sensor_status, email_address) values ('${wifi_mac_address}', '${board_nickname}', '${phone_number}', '${address}', '${sensor_status}', '${email_address});

센서정보수정
update sensor set board_nickname='${board_nickname}', phone_number='${phone_number}', address='${address}' where wifi_mac_address='${wifi_mac_address}'

센서삭제
update sensor set sensor_status='${sensor_status}', phone_number=null where  wifi_mac_address='${wifi_mac_address}'

센서목록
select wifi_mac_address, board_nickname, phone_number, address from sensor where email_address='${email_address}

비밀번호수정
select password from User where email_address='${email_address}'
update User set password='${password}' where email_address='${email_address}

--user_social에 user 추가--
insert user_social (email_address, social) values ('test1@naver.com', 'naver');

--login state 변경 state == 1 (in)--
Update user_social set log_in_state='1' where email_address='test1@naver.com';

--login state 변경 state == 0 (out)--
Update user_social set log_in_state='0' where email_address='test1@naver.com';

--user_social 회원정보 조회--
Select phone_number, inst_name from user_social where email_address='test1@naver.com';

-- user_social 회원정보 수정--
update user_social set phone_number='number1', inst_name =  'inst1' where email_address='test1@naver.com';

-- user_social 회원삭제 --
Delete from user_social where email_address='test1@naver.com';

--sensor list 조회 (nickname==0000)--
Select sensor.wifi_mac_address, location, sensor_state
from (sensor Join connection on sensor.wifi_mac_address=connection.wifi_mac_address)
where nickname=0000 and connection.email_address='test@naver.com';

--sensor list 조회 (wifimacaddress)--
Select nickname, location, sensor_state
from (sensor Join connection on sensor.wifi_mac_address=connection.wifi_mac_address)
where sensor.wifi_mac_address='mac0' and connection.email_address='test@naver.com';

--sensor list 조회 (sensor state)--
Select nickname, location, sensor.wifi_mac_address
from (sensor Join connection on sensor.wifi_mac_address=connection.wifi_mac_address)
where sensor_state = 'connect’'and connection.email_address='test@naver.com';

--alarm insert--
insert alarm (wifi_mac_address, alarm_time) values ('mac01', now());

--alarm 조회--
Select * from alarm where date_format(alarm_time, '%m') ='09'; -- 월별--
Select * from alarm where date_format(alarm_time, '%m%d') =’0909’; -- 일별--

-alarm 개수 조회--
select count(*) from alarm where date_format(alarm_time, '%m')='09';--월--
select count(*) from alarm where date_format(alarm_time, '%m%d')='0909';--일--

--개수 선택 시 view (월)--
create view view as
    -> select alarm_time, wifi_mac_address
    -> from alarm
    -> where date_format(alarm_time, '%m')='09';

--개수 선택 시 view (일)--
create view view as
    -> select alarm_time, wifi_mac_address
    -> from alarm
    -> where date_format(alarm_time, '%m%d')='0909';
    
    
'User', 'CREATE TABLE `User` (
`email_address` varchar(50) CHARACTER SET utf8 NOT NULL,
`sign_in_status` varchar(1) CHARACTER SET utf8 DEFAULT NULL,
`user_type` varchar(10) CHARACTER SET utf8 DEFAULT NULL,
`password` varchar(100) DEFAULT NULL,
`salt` varchar(100) DEFAULT NULL,
`token` varchar(200) DEFAULT NULL,
`phone_number` varchar(20) DEFAULT NULL,
PRIMARY KEY (`email_address`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1'

'Temp_user', 'CREATE TABLE `Temp_user` (
`email_address` varchar(50) CHARACTER SET utf8 NOT NULL,
`temp_password` varchar(100) DEFAULT NULL,
PRIMARY KEY (`email_address`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1'

'Sensor', 'CREATE TABLE `Sensor` (
`wifi_mac_address` varchar(48) CHARACTER SET utf8 NOT NULL,
`email_address` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
`board_nickname` varchar(20) CHARACTER SET utf8 DEFAULT NULL,
`address` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
`sensor_status` varchar(1) CHARACTER SET utf8 DEFAULT NULL,
`phone_number` varchar(20) DEFAULT NULL,
`latitude` varchar(20) CHARACTER SET utf8 DEFAULT NULL,
`longitude` varchar(20) CHARACTER SET utf8 DEFAULT NULL,
PRIMARY KEY (`wifi_mac_address`),
KEY `email_address` (`email_address`),
CONSTRAINT `Sensor_ibfk_1` FOREIGN KEY (`email_address`) REFERENCES `User` (`email_address`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1'

'Data', 'CREATE TABLE `Data` (
`wifi_mac_address` varchar(48) CHARACTER SET utf8 DEFAULT NULL,
`measurement_data` varchar(100) DEFAULT NULL,
`measurement_time` datetime DEFAULT NULL,
`MSN` int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`MSN`),
KEY `wifi_mac_address` (`wifi_mac_address`),
CONSTRAINT `Data_ibfk_1` FOREIGN KEY (`wifi_mac_address`) REFERENCES `Sensor` (`wifi_mac_address`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1'

'Alarm', 'CREATE TABLE `Alarm` (
`ASN` int(11) NOT NULL AUTO_INCREMENT,
`wifi_mac_address` varchar(48) CHARACTER SET utf8 DEFAULT NULL,
`alamr_time` datetime DEFAULT NULL,
PRIMARY KEY (`ASN`),
KEY `wifi_mac_address` (`wifi_mac_address`),
CONSTRAINT `Alarm_ibfk_1` FOREIGN KEY (`wifi_mac_address`) REFERENCES `Sensor` (`wifi_mac_address`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1'

'Hospital', 'CREATE TABLE `Hospital` (
`hospital_name` varchar(30) DEFAULT NULL,
`hospital_location` varchar(50) DEFAULT NULL,
`hospital_phone_num` varchar(20) DEFAULT NULL,
`category` varchar(20) DEFAULT NULL,
`emergency_room` tinyint(1) DEFAULT NULL,
`latitude` varchar(20) DEFAULT NULL,
`longitude` varchar(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8'



